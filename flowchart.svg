<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1551px" preserveAspectRatio="none" style="width:1181px;height:1551px;background:#FFFFFF;" version="1.1" viewBox="0 0 1181 1551" width="1181px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="253" x="462.5" y="15"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="243" x="467.5" y="32.9951">Window Chatbot API Flowchart</text><ellipse cx="586.5" cy="57.2969" fill="#222222" rx="10" ry="10" style="stroke:#222222;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="520" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="113" x="530" y="108.4355">Initialize Flask App</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="100" x="536.5" y="141.2656"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="80" x="546.5" y="162.4043">Enable CORS</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="125" x="524" y="243.6367"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="105" x="534" y="264.7754">Set CORS Origins</text><polygon fill="#F1F1F1" points="516.5,195.2344,656.5,195.2344,668.5,207.2344,656.5,219.2344,516.5,219.2344,504.5,207.2344,516.5,195.2344" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="590.5" y="229.4448">Yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="140" x="516.5" y="211.0425">CORS Origins from ENV?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="15" x="668.5" y="204.6401">No</text><polygon fill="#F1F1F1" points="586.5,297.6055,598.5,309.6055,586.5,321.6055,574.5,309.6055,586.5,297.6055" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="500.5" y="341.6055"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="152" x="510.5" y="362.7441">Set Secret Key from ENV</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="511.5" y="395.5742"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="130" x="521.5" y="416.7129">Set API Key from ENV</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="187" x="493" y="449.543"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="167" x="503" y="470.6816">Set Max Number of Tokens</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="170" x="501.5" y="503.5117"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="150" x="511.5" y="524.6504">Initialize WindowChatbot</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="191" x="491" y="557.4805"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="171" x="501" y="578.6191">Define /api/health Endpoint</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="181" x="496" y="611.4492"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="161" x="506" y="632.5879">Define /api/login Endpoint</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="179" x="497" y="665.418"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="159" x="507" y="686.5566">Define /api/chat Endpoint</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="302" x="435.5" y="719.3867"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="282" x="445.5" y="740.5254">Run Flask App on host 0.0.0.0 and port 5000</text><ellipse cx="586.5" cy="784.3555" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="586.5" cy="784.3555" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.5;" x1="125.5" x2="836.25" y1="800.3555" y2="800.3555"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="188" x="31.5" y="1112.6641"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="168" x="41.5" y="1133.8027">GET Request to /api/health</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="229" x="11" y="1181.6328"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="209" x="21" y="1202.7715">Return JSON {"status": "healthy"}</text><ellipse cx="125.5" cy="1255.1172" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="125.5" cy="1255.1172" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="186" x="288.5" y="1044.2109"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="166" x="298.5" y="1065.3496">POST Request to /api/login</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="307.5" y="1112.6641"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="128" x="317.5" y="1133.8027">Generate Session ID</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="190" x="286.5" y="1181.6328"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="170" x="296.5" y="1202.7715">Store Session ID in session</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="263" x="250" y="1244.1172"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="243" x="260" y="1265.2559">Return JSON {"session_id": session_id}</text><ellipse cx="381.5" cy="1321.4375" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="381.5" cy="1321.4375" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="184" x="744.25" y="815.3555"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="164" x="754.25" y="836.4941">POST Request to /api/chat</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="330" x="671.25" y="917.7266"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="310" x="681.25" y="938.8652">Return Error {"error": "User not logged in"} [401]</text><ellipse cx="836.25" cy="991.2109" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="836.25" cy="991.2109" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><polygon fill="#F1F1F1" points="771.25,869.3242,901.25,869.3242,913.25,881.3242,901.25,893.3242,771.25,893.3242,759.25,881.3242,771.25,869.3242" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="15" x="840.25" y="903.5347">No</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="130" x="771.25" y="885.1323">session_id in session?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="913.25" y="878.73">Yes</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="198" x="737.25" y="1058.6953"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="178" x="747.25" y="1079.834">Extract session_id from JSON</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="320" x="676.25" y="1175.5508"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="300" x="686.25" y="1196.6895">Return Error {"error": "Invalid session id"} [401]</text><ellipse cx="836.25" cy="1249.0352" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="836.25" cy="1249.0352" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><polygon fill="#F1F1F1" points="712.25,1127.1484,960.25,1127.1484,972.25,1139.1484,960.25,1151.1484,712.25,1151.1484,700.25,1139.1484,712.25,1127.1484" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="15" x="840.25" y="1161.3589">No</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="248" x="712.25" y="1142.9565">session_id matches session["session_id"]?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="972.25" y="1136.5542">Yes</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="188" x="742.25" y="1322.7891"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="168" x="752.25" y="1343.9277">Extract question from JSON</text><polygon fill="#F1F1F1" points="782.25,1376.7578,890.25,1376.7578,902.25,1388.7578,890.25,1400.7578,782.25,1400.7578,770.25,1388.7578,782.25,1376.7578" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="108" x="782.25" y="1392.5659">question provided?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="21" x="749.25" y="1386.1636">Yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="15" x="902.25" y="1386.1636">No</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="194" x="579.5" y="1410.7578"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="174" x="589.5" y="1431.8965">Get Response from Chatbot</text><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="251" x="551" y="1464.7266"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="231" x="561" y="1485.8652">Return JSON {"response": response}</text><ellipse cx="676.5" cy="1529.6953" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="676.5" cy="1529.6953" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><rect fill="#F1F1F1" height="33.9688" rx="12.5" ry="12.5" style="stroke:#181818;stroke-width:0.5;" width="348" x="822" y="1410.7578"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="328" x="832" y="1431.8965">Return Error {"error": "No question provided"} [400]</text><ellipse cx="996" cy="1475.7266" fill="none" rx="11" ry="11" style="stroke:#222222;stroke-width:1.0;"/><ellipse cx="996" cy="1475.7266" fill="#222222" rx="6" ry="6" style="stroke:#111111;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="67.2969" y2="87.2969"/><polygon fill="#181818" points="582.5,77.2969,586.5,87.2969,590.5,77.2969,586.5,81.2969" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="121.2656" y2="141.2656"/><polygon fill="#181818" points="582.5,131.2656,586.5,141.2656,590.5,131.2656,586.5,135.2656" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="219.2344" y2="243.6367"/><polygon fill="#181818" points="582.5,233.6367,586.5,243.6367,590.5,233.6367,586.5,237.6367" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="668.5" x2="680.5" y1="207.2344" y2="207.2344"/><polygon fill="#181818" points="676.5,250.6211,680.5,260.6211,684.5,250.6211,680.5,254.6211" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="680.5" y1="207.2344" y2="309.6055"/><line style="stroke:#181818;stroke-width:1.0;" x1="680.5" x2="598.5" y1="309.6055" y2="309.6055"/><polygon fill="#181818" points="608.5,305.6055,598.5,309.6055,608.5,313.6055,604.5,309.6055" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="277.6055" y2="297.6055"/><polygon fill="#181818" points="582.5,287.6055,586.5,297.6055,590.5,287.6055,586.5,291.6055" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="175.2344" y2="195.2344"/><polygon fill="#181818" points="582.5,185.2344,586.5,195.2344,590.5,185.2344,586.5,189.2344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="321.6055" y2="341.6055"/><polygon fill="#181818" points="582.5,331.6055,586.5,341.6055,590.5,331.6055,586.5,335.6055" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="375.5742" y2="395.5742"/><polygon fill="#181818" points="582.5,385.5742,586.5,395.5742,590.5,385.5742,586.5,389.5742" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="429.543" y2="449.543"/><polygon fill="#181818" points="582.5,439.543,586.5,449.543,590.5,439.543,586.5,443.543" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="483.5117" y2="503.5117"/><polygon fill="#181818" points="582.5,493.5117,586.5,503.5117,590.5,493.5117,586.5,497.5117" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="537.4805" y2="557.4805"/><polygon fill="#181818" points="582.5,547.4805,586.5,557.4805,590.5,547.4805,586.5,551.4805" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="591.4492" y2="611.4492"/><polygon fill="#181818" points="582.5,601.4492,586.5,611.4492,590.5,601.4492,586.5,605.4492" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="645.418" y2="665.418"/><polygon fill="#181818" points="582.5,655.418,586.5,665.418,590.5,655.418,586.5,659.418" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="699.3867" y2="719.3867"/><polygon fill="#181818" points="582.5,709.3867,586.5,719.3867,590.5,709.3867,586.5,713.3867" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="586.5" x2="586.5" y1="753.3555" y2="773.3555"/><polygon fill="#181818" points="582.5,763.3555,586.5,773.3555,590.5,763.3555,586.5,767.3555" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="125.5" x2="125.5" y1="1146.6328" y2="1181.6328"/><polygon fill="#181818" points="121.5,1171.6328,125.5,1181.6328,129.5,1171.6328,125.5,1175.6328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="125.5" x2="125.5" y1="1215.6016" y2="1244.1172"/><polygon fill="#181818" points="121.5,1234.1172,125.5,1244.1172,129.5,1234.1172,125.5,1238.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="381.5" x2="381.5" y1="1078.1797" y2="1112.6641"/><polygon fill="#181818" points="377.5,1102.6641,381.5,1112.6641,385.5,1102.6641,381.5,1106.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="381.5" x2="381.5" y1="1146.6328" y2="1181.6328"/><polygon fill="#181818" points="377.5,1171.6328,381.5,1181.6328,385.5,1171.6328,381.5,1175.6328" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="381.5" x2="381.5" y1="1215.6016" y2="1244.1172"/><polygon fill="#181818" points="377.5,1234.1172,381.5,1244.1172,385.5,1234.1172,381.5,1238.1172" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="381.5" x2="381.5" y1="1278.0859" y2="1310.4375"/><polygon fill="#181818" points="377.5,1300.4375,381.5,1310.4375,385.5,1300.4375,381.5,1304.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="836.25" x2="836.25" y1="951.6953" y2="980.2109"/><polygon fill="#181818" points="832.25,970.2109,836.25,980.2109,840.25,970.2109,836.25,974.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="836.25" x2="836.25" y1="893.3242" y2="917.7266"/><polygon fill="#181818" points="832.25,907.7266,836.25,917.7266,840.25,907.7266,836.25,911.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="913.25" x2="1011.25" y1="881.3242" y2="881.3242"/><polygon fill="#181818" points="1007.25,950.2109,1011.25,960.2109,1015.25,950.2109,1011.25,954.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1011.25" x2="1011.25" y1="881.3242" y2="1024.2109"/><line style="stroke:#181818;stroke-width:1.0;" x1="1011.25" x2="836.25" y1="1024.2109" y2="1024.2109"/><line style="stroke:#181818;stroke-width:1.0;" x1="836.25" x2="836.25" y1="1024.2109" y2="1058.6953"/><polygon fill="#181818" points="832.25,1048.6953,836.25,1058.6953,840.25,1048.6953,836.25,1052.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="836.25" x2="836.25" y1="849.3242" y2="869.3242"/><polygon fill="#181818" points="832.25,859.3242,836.25,869.3242,840.25,859.3242,836.25,863.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="836.25" x2="836.25" y1="1209.5195" y2="1238.0352"/><polygon fill="#181818" points="832.25,1228.0352,836.25,1238.0352,840.25,1228.0352,836.25,1232.0352" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="836.25" x2="836.25" y1="1151.1484" y2="1175.5508"/><polygon fill="#181818" points="832.25,1165.5508,836.25,1175.5508,840.25,1165.5508,836.25,1169.5508" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="972.25" x2="1006.25" y1="1139.1484" y2="1139.1484"/><polygon fill="#181818" points="1002.25,1208.0352,1006.25,1218.0352,1010.25,1208.0352,1006.25,1212.0352" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1006.25" x2="1006.25" y1="1139.1484" y2="1290.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="1006.25" x2="836.25" y1="1290.4375" y2="1290.4375"/><line style="stroke:#181818;stroke-width:1.0;" x1="836.25" x2="836.25" y1="1290.4375" y2="1322.7891"/><polygon fill="#181818" points="832.25,1312.7891,836.25,1322.7891,840.25,1312.7891,836.25,1316.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="836.25" x2="836.25" y1="1092.6641" y2="1127.1484"/><polygon fill="#181818" points="832.25,1117.1484,836.25,1127.1484,840.25,1117.1484,836.25,1121.1484" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="676.5" x2="676.5" y1="1444.7266" y2="1464.7266"/><polygon fill="#181818" points="672.5,1454.7266,676.5,1464.7266,680.5,1454.7266,676.5,1458.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="676.5" x2="676.5" y1="1498.6953" y2="1518.6953"/><polygon fill="#181818" points="672.5,1508.6953,676.5,1518.6953,680.5,1508.6953,676.5,1512.6953" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="996" x2="996" y1="1444.7266" y2="1464.7266"/><polygon fill="#181818" points="992,1454.7266,996,1464.7266,1000,1454.7266,996,1458.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="770.25" x2="676.5" y1="1388.7578" y2="1388.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="676.5" x2="676.5" y1="1388.7578" y2="1410.7578"/><polygon fill="#181818" points="672.5,1400.7578,676.5,1410.7578,680.5,1400.7578,676.5,1404.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="902.25" x2="996" y1="1388.7578" y2="1388.7578"/><line style="stroke:#181818;stroke-width:1.0;" x1="996" x2="996" y1="1388.7578" y2="1410.7578"/><polygon fill="#181818" points="992,1400.7578,996,1410.7578,1000,1400.7578,996,1404.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="836.25" x2="836.25" y1="1356.7578" y2="1376.7578"/><polygon fill="#181818" points="832.25,1366.7578,836.25,1376.7578,840.25,1366.7578,836.25,1370.7578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="125.5" x2="125.5" y1="800.3555" y2="1112.6641"/><polygon fill="#181818" points="121.5,1102.6641,125.5,1112.6641,129.5,1102.6641,125.5,1106.6641" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="381.5" x2="381.5" y1="800.3555" y2="1044.2109"/><polygon fill="#181818" points="377.5,1034.2109,381.5,1044.2109,385.5,1034.2109,381.5,1038.2109" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="836.25" x2="836.25" y1="800.3555" y2="815.3555"/><polygon fill="#181818" points="832.25,805.3555,836.25,815.3555,840.25,805.3555,836.25,809.3555" style="stroke:#181818;stroke-width:1.0;"/><!--MD5=[e3eb6671d5d69be26a712352589724ce]
@startuml
title Window Chatbot API Flowchart

start
  :Initialize Flask App;
  :Enable CORS;
if (CORS Origins from ENV?) then (Yes)
  :Set CORS Origins;
else (No)
endif
  :Set Secret Key from ENV;
  :Set API Key from ENV;
  :Set Max Number of Tokens;
  :Initialize WindowChatbot;
  :Define /api/health Endpoint;
  :Define /api/login Endpoint;
  :Define /api/chat Endpoint;
  :Run Flask App on host 0.0.0.0 and port 5000;
stop


split
  :GET Request to /api/health;
  :Return JSON {"status": "healthy"};
  stop
split again
  :POST Request to /api/login;
  :Generate Session ID;
  :Store Session ID in session;
  :Return JSON {"session_id": session_id};
  stop
split again
  :POST Request to /api/chat;
  if (session_id in session?) then (No)
    :Return Error {"error": "User not logged in"} [401];
    stop
  else (Yes)
  endif

  :Extract session_id from JSON;

  if (session_id matches session["session_id"]?) then (No)
    :Return Error {"error": "Invalid session id"} [401];
    stop
  else (Yes)
  endif

  :Extract question from JSON;
  if (question provided?) then (Yes)
    :Get Response from Chatbot;
    :Return JSON {"response": response};
    stop
  else (No)
    :Return Error {"error": "No question provided"} [400];
    stop
  endif
end split
@enduml

PlantUML version 1.2022.7(Mon Aug 22 17:01:30 UTC 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>